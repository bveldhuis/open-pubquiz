<div class="container">
  <div class="participant-content">
    <div class="team-info">
      <h1>Welcome, {{ teamName }}!</h1>
      <p class="session-info">Session: {{ sessionCode }}</p>
    </div>

    @if (!isQuestionActive && !sessionEnded) {
      <div class="status-card">
        <h2>Waiting for questions...</h2>
        <p>Your presenter will start the quiz soon.</p>
      </div>
    }

    <!-- Session Ended View -->
    @if (sessionEnded) {
      <div class="session-ended-card">
        <h2>üéâ Quiz Session Ended!</h2>
        <p>Thank you for participating in the quiz!</p>
        @if (finalLeaderboard.length > 0) {
          <div class="final-leaderboard">
            <h3>üèÜ Final Results</h3>
            <div class="leaderboard-list">
              @for (team of finalLeaderboard; track team; let i = $index) {
                <div class="leaderboard-item">
                  <div class="rank">{{ i + 1 }}</div>
                  <div class="team-name">{{ team.name }}</div>
                  <div class="points">{{ team.total_points }} pts</div>
                </div>
              }
            </div>
          </div>
        }
      </div>
    }

    <!-- Question Display -->
    @if (isQuestionActive && currentQuestion && !sessionEnded) {
      <app-question-answer
        [question]="currentQuestion"
        [isActive]="isQuestionActive"
        [isAnswerSubmitted]="answerSubmitted"
        [timeRemaining]="timeRemaining"
        [totalTime]="currentQuestion.time_limit || 60"
        (answerSubmitted)="onAnswerSubmitted($event)"
        (onTimeUp)="onTimeUp()"
        (onTimeChanged)="onTimeChanged($event)">
      </app-question-answer>
    }

    <div class="connection-status">
      <mat-icon [class]="isConnected ? 'connected' : 'disconnected'">
        {{ isConnected ? 'wifi' : 'wifi_off' }}
      </mat-icon>
      <span>{{ isConnected ? 'Connected' : 'Disconnected' }}</span>
    </div>
  </div>
</div>
