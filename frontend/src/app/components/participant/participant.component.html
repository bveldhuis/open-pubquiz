<div class="container">
  <div class="participant-content">
    <div class="team-info">
      <h1>Welcome, {{ teamName }}!</h1>
      <p class="session-info">Session: {{ sessionCode }}</p>
    </div>

    <div class="status-card" *ngIf="!isQuestionActive && !sessionEnded">
      <h2>Waiting for questions...</h2>
      <p>Your presenter will start the quiz soon.</p>
    </div>

    <!-- Session Ended View -->
    <div class="session-ended-card" *ngIf="sessionEnded">
      <h2>ğŸ‰ Quiz Session Ended!</h2>
      <p>Thank you for participating in the quiz!</p>
      
      <div class="final-leaderboard" *ngIf="finalLeaderboard.length > 0">
        <h3>ğŸ† Final Results</h3>
        <div class="leaderboard-list">
          <div class="leaderboard-item" *ngFor="let team of finalLeaderboard; let i = index">
            <div class="rank">{{ i + 1 }}</div>
            <div class="team-name">{{ team.name }}</div>
            <div class="points">{{ team.total_points }} pts</div>
          </div>
        </div>
      </div>
    </div>

    <!-- Question Display -->
    <app-question-answer
      *ngIf="isQuestionActive && currentQuestion && !sessionEnded"
      [question]="currentQuestion"
      [isActive]="isQuestionActive"
      [isAnswerSubmitted]="answerSubmitted"
      [timeRemaining]="timeRemaining"
      [totalTime]="currentQuestion.time_limit || 60"
      (answerSubmitted)="onAnswerSubmitted($event)"
      (onTimeUp)="onTimeUp()"
      (onTimeChanged)="onTimeChanged($event)">
    </app-question-answer>

    <div class="connection-status">
      <mat-icon [class]="isConnected ? 'connected' : 'disconnected'">
        {{ isConnected ? 'wifi' : 'wifi_off' }}
      </mat-icon>
      <span>{{ isConnected ? 'Connected' : 'Disconnected' }}</span>
    </div>
  </div>
</div>
