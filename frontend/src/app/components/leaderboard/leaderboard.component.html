<div class="leaderboard quiz-component-card">
  <div class="leaderboard-header">
    <h2>üèÜ Leaderboard</h2>
    @if (currentRound) {
      <div class="round-info">
        <span class="round-label">Round {{ currentRound }}</span>
      </div>
    }
  </div>

  <div class="teams-list">
    @for (team of sortedTeams; track team; let i = $index) {
      <div
        class="team-item"
        [class.top-three]="i < 3">
        <div class="position">
          <div class="position-number" [class.top-three]="i < 3">
            {{ i + 1 }}
          </div>
          @if (i < 3) {
            <div class="medal">
              @if (i === 0) {
                <mat-icon>emoji_events</mat-icon>
              }
              @if (i === 1) {
                <mat-icon>military_tech</mat-icon>
              }
              @if (i === 2) {
                <mat-icon>workspace_premium</mat-icon>
              }
            </div>
          }
        </div>
        <div class="team-info">
          <div class="team-name">{{ team.name }}</div>
          <div class="team-stats">
            <span class="stat">
              <mat-icon>star</mat-icon>
              {{ team.total_points || 0 }} pts
            </span>
            <span class="stat">
              <mat-icon>quiz</mat-icon>
              {{ team.correct_answers || 0 }}/{{ team.answers_submitted || 0 }} correct
            </span>
          </div>
        </div>
        <div class="points-display">
          <span class="points">{{ team.total_points || 0 }}</span>
          <span class="points-label">points</span>
        </div>
      </div>
    }
  </div>

  @if (teams.length === 0) {
    <app-no-content-state
      icon="group_off"
      message="No teams have joined yet">
    </app-no-content-state>
  }

  <div class="leaderboard-footer">
    <div class="stats-summary">
      <div class="stat-item">
        <span class="stat-label">Total Teams:</span>
        <span class="stat-value">{{ teams.length }}</span>
      </div>
      <div class="stat-item">
        <span class="stat-label">Average Score:</span>
        <span class="stat-value">{{ averageScore | number:'1.1-1' }}</span>
      </div>
      <div class="stat-item">
        <span class="stat-label">Highest Score:</span>
        <span class="stat-value">{{ highestScore }}</span>
      </div>
    </div>
  </div>
</div>
